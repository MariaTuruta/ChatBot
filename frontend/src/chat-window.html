<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <title>ChatBot Home</title>
    <link href="style.css" rel="stylesheet"/>
    <!-- FONT AWESOME ICONS  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- GOOGLE FONTS  -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'/>
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'/>
    <!-- BOOTSTRAP -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body>

<header class="pt-1 pb-1 navbar">
    <h1 class="site-name text-center">[cnt]</h1>
    <i class="fa fa-icon">[cnt]</i>
    <img src="link">
</header>


<main class="main">
    <h3>[cnt]</h3>
    <section>
        <h4>[cnt]</h4>
    </section>
    <br><br>


    <section class="contact-list"></section>


    <section class="conversation">
        <section class="msg-view" id="msg-view">
            <section class="message-incoming"><i class="fa fa-user user-icon"></i>
                <p class="text-message">[cnt]</p></section>
            <br><br><br><br><br>

            <section class="message-incoming"><i class="fa fa-user user-icon"></i>
                <p class="text-message">[cnt]</p></section>
            <br><br><br><br><br>

            <section class="message-outgoing" ><i class="fa fa-user user-icon"></i>
                <p class="text-message">[cnt]</p></section>
            <br><br><br><br><br>
        </section>


        <section class="msg-input">
            <i class="fa fa-user user-icon"></i>

            <script>
                function send_message() {
                    var textarea = document.getElementById("input");
                    var new_message = textarea.value;
                    var chatWindow = document.getElementById("msg-view");
                    var chat = chatWindow.appendChild(document.createElement("section"));
                    chat.classList.add("message-outgoing");

                    var uIcon = chat.appendChild(document.createElement("i"));
                    var uMessage = chat.appendChild(document.createElement("p"));
                    uMessage.classList.add("text-message");
                    uMessage.innerHTML = new_message;

                    uIcon.classList.add("fa", "fa-user", "user-icon");
                    for (var i=0; i<5; i+=1) {
                        chatWindow.appendChild(document.createElement("br"));
                    }

                    chatWindow.scrollTop = chatWindow.scrollHeight-chatWindow.clientHeight;

                    recieve_message(new_message);
                }

                function recieve_message(question) {
                    var request = new XMLHttpRequest();

                    request.onreadystatechange = () => {
                        if(request.readyState === 4 && request.status === 200) {

                            var chatWindow = document.getElementById("msg-view");
                            var chat = chatWindow.appendChild(document.createElement("section"));
                            chat.classList.add("message-incoming");

                            var uIcon = chat.appendChild(document.createElement("i"));
                            var uMessage = chat.appendChild(document.createElement("p"));
                            uMessage.classList.add("text-message");
                            uMessage.innerHTML = request.responseText;

                            uIcon.classList.add("fa", "fa-user", "user-icon");
                            for (var i = 0; i < 5; i += 1) {
                                chatWindow.appendChild(document.createElement("br"));
                            }

                            chatWindow.scrollTop = chatWindow.scrollHeight - chatWindow.clientHeight;
                        }
                    }

                    request.open('GET', 'http://localhost:8080/chat?question=' + question, true);
                    request.send();
                }
            </script>

            <textarea id="input">[cnt]</textarea>
            <input class="btn" type="button" value="Send" onclick="send_message()">
        </section>
    </section>

</main>


<footer class="footer">
    <section class="footer-left">
        <h3>[cnt]</h3>
        <p class="footer-links">
            [cnt]
            <i class="icon"></i>
            <a href="link"></a>
        </p>
    </section>

    <section class="footer-center">
        <i class="fa fa-phone"></i>
        <p>[cnt]</p><br>
        <i class="fa fa-map-marker"></i>
        <p>
            <span>[cnt]</span>[cnt]</p>
    </section>

    <section class="footer-right">

        <p class="footer-company-about">
            <span>[cnt]</span>
            [cnt]
        </p>
        <section class="footer-icons">
            <a href='link'>
                <i class="fa fa-facebook"></i>
            </a>
            <a href='link'>
                <i class="fa fa-twitter"></i>
            </a>
            <a href='link'>
                <i class="fa fa-linkedin"></i>
            </a>
            <a href='link'>
                <i class="fa fa-github"></i>
            </a>
        </section>
    </section>

</footer>

</body>
</html>
